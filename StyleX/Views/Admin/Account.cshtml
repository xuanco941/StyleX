@{
    Layout = "_LayoutAdmin";
}
<div id="appAccount">
    <div class="row mb-3">
        <div class="col-md-4">
            <label>Tên tài khoản:</label>
            <input type="text" class="form-control" v-model="accountName">
        </div>
        <div class="col-md-4">
            <label>Trạng thái:</label>
            <select class="form-control" v-model="isActive">
                <option value="">Tất cả</option>
                <option value="true">Đã kích hoạt</option>
                <option value="false">Rút</option>
            </select>
        </div>
    </div>

    <table class="table" style="vertical-align: middle; text-align:center">
        <thead class="thead-dark">
            <tr>
                <th scope="col">#</th>
                <th scope="col">Loại vải</th>
                <th scope="col">Trạng thái</th>
                <th scope="col">Mô tả</th>
                <th scope="col">Thao tác</th>
            </tr>
        </thead>
        <tbody>
            <tr v-if="isLoad">
                <td style="font-size: 25px; text-align:center;" colspan="5"><i class="fa-solid fa-spinner fa-spin-pulse"></i></td>
            </tr>
            <tr v-if="isLoad == false">
                <td>1</td>
                <td>Mark</td>
                <td>Otto</td>
                <td>mdo</td>
                <td><button class="btn btn-dark">Cập nhật</button></td>
            </tr>
        </tbody>
    </table>
    <div class="d-flex justify-content-center mt-3">
        <ul id="pagination" class="pagination-sm">
        </ul>
    </div>


</div>


@section Scripts{
    <script>

        var appAccount = new Vue({
            el: "#appAccount",
            data: {
                resData: [],
                dataTable: [],
                isLoad: true,
                isActive : "",
                accountName: "",

                totalPages: 1,
                pageSize: 15

            },
            methods: {
                init: async function () {

                    await this.GetMaterial();

                    this.$forceUpdate();
                },
                GetMaterial: async function (page) {
                    var self = this;
                    self.isLoad = true;
                    self.dataTable = [];

                    $.ajax({
                        type: "POST",
                        contentType: "application/json; charset=utf-8",
                        url: "/admin/GetAccounts",
                        data: JSON.stringify({
                            accountName: self.accountName,
                            isActive: self.isActive
                        }),
                        success: function (res) {
                            self.isLoad = false;
                            if (res.status == 1) {
                                self.resData = res.data;
                                self.totalPages = Math.ceil(self.resData.length / self.pageSize);
                                console.log(self.resData);

                                $('#pagination').twbsPagination({
                                    totalPages: self.totalPages,
                                    visiblePages: 6,
                                    first: "Trang đầu",
                                    last: "Trang cuối",
                                    next: 'Trang tiếp',
                                    prev: 'Trang trước',
                                    onPageClick: function (event, page) {
                                        var start = (page - 1) * self.pageSize;
                                        var end = page * self.pageSize - 1;
                                        self.dataTable = self.resData.slice(start, end);
                                    }
                                });
                            }
                            else {
                                ShowAlert(res.message, "danger");
                            }
                        },
                        error: function (xhr, status, error) {
                            self.isLoad = false;
                            ShowAlert(error, "danger");
                        }
                    });

                },

            },
            mounted() {
                this.init();
            },
        });
    </script>

    }